/*! dip.js - v0.1.0
 *  Release on: 2014-11-08
 *  Copyright (c) 2014 St√©phane Bachelier
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.Dip=b()}(this,function(){"use strict";var a=function(){this.db=Object.create(null)};a.prototype={getItem:function(a){var b=this;return new Promise(function(c,d){a||d(new Error("Key cannot be null or undefined."));try{b.db[a]||(b.db[a]={}),b.db[a].value?c(b.db[a].value):b.db[a].pending={resolve:c,reject:d}}catch(e){d(e)}})},setItem:function(a,b){var c=this;return new Promise(function(d,e){a||e(new Error("Key cannot be null or undefined."));try{c.db[a]?(c.db[a].value=b,c.db[a].pending?(c.db[a].pending.resolve(b),delete c.db[a].pending):d(b)):(c.db[a]={value:b},d(b))}catch(f){e(f)}})}};var b=function(b){this.store=b&&b.store?b.store:new a};return b.DefaultStore=a,b.prototype.getItem=function(a){return this.store.getItem(a)},b.prototype.setItem=function(a,b){return this.store.setItem(a,b)},b});